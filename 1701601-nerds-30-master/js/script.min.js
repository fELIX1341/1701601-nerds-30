var btn=document.querySelector(".btn-write-to-us"),modal=document.querySelector("#contact-dialog"),btnClose=modal.querySelector(".btn-close"),form=modal.querySelector(".contact-form"),nameField=form.querySelector("#contact-form-name"),emailField=form.querySelector("#contact-form-email"),messageField=form.querySelector("#contact-form-message"),isStorageSupport=!0,nameStorage="",emailStorage="";try{nameStorage=localStorage.getItem("name"),emailStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}function closeModal(){modal.classList.remove("modal-show"),nameField.classList.remove("invalid"),emailField.classList.remove("invalid"),isStorageSupport&&(localStorage.setItem("name",nameField.value),localStorage.setItem("email",emailField.value))}btn.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-show"),nameStorage&&(nameField.value=nameStorage),emailStorage&&(emailField.value=emailStorage),nameField.value?emailField.value?messageField.focus():emailField.focus():nameField.focus()}),form.addEventListener("submit",function(e){nameField.value?nameField.classList.remove("invalid"):(e.preventDefault(),nameField.classList.add("invalid")),emailField.value?emailField.classList.remove("invalid"):(e.preventDefault(),emailField.classList.add("invalid"))}),btnClose.addEventListener("click",function(e){e.preventDefault(),closeModal()}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),closeModal())});